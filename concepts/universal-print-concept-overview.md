---
title: Visão geral da API de impressão em nuvem da Impressão Universal
description: A Impressão Universal é uma solução moderna que as organizações podem usar para gerir a infraestrutura de impressão através de serviços de nuvem da Microsoft.
author: braedenp-msft
localization_priority: Priority
ms.prod: universal-print
ms.custom: scenarios:getting-started
ms.openlocfilehash: 3d6cadb6b064fcd54432f1f598afbda9c91ae869
ms.sourcegitcommit: 1d2adc4062c8e83d23768682cf66a731bccd313c
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/16/2021
ms.locfileid: "49883015"
---
# <a name="universal-print-cloud-printing-api-overview"></a><span data-ttu-id="fa0ab-103">Visão geral da API de impressão em nuvem da Impressão Universal</span><span class="sxs-lookup"><span data-stu-id="fa0ab-103">Universal Print cloud printing API overview</span></span>

<span data-ttu-id="fa0ab-104">A Impressão Universal é uma solução moderna que as organizações podem usar para gerir a infraestrutura de impressão através de serviços de nuvem da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-104">Universal Print is a modern print solution that organizations can use to manage their print infrastructure through cloud services from Microsoft.</span></span>

![Captura de tela da página inicial do portal da Impressão Universal do Azure](images/universal-print-portal-homepage.png)

## <a name="why-use-universal-print"></a><span data-ttu-id="fa0ab-106">Por que usar a Impressão Universal?</span><span class="sxs-lookup"><span data-stu-id="fa0ab-106">Why use Universal Print?</span></span>

<span data-ttu-id="fa0ab-107">A Impressão Universal move a funcionalidade de impressão do Windows Server para a nuvem do Microsoft 365, para que as organizações não precisem mais de servidores de impressão locais e não precisem instalar drivers de impressora em dispositivos.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-107">Universal Print moves key Windows Server print functionality to the Microsoft 365 cloud, so organizations no longer need on-premises print servers and do not need to install printer drivers on devices.</span></span> <span data-ttu-id="fa0ab-108">Além disso, a Impressão Universal adiciona funcionalidades fundamentais, como grupos de segurança para acesso à impressora, descoberta de impressora baseada no local e uma experiência de administrador avançada.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-108">In addition, Universal Print adds key functionality like security groups for printer access, location-based printer discovery, and a rich administrator experience.</span></span>

<span data-ttu-id="fa0ab-109">Como as organizações adotam a Impressão Universal, as organizações e os fornecedores independentes de software (ISVs) podem usar a API de Impressão Universal no Microsoft Graph para criar e ampliar aplicativos para suportar novos cenários.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-109">As organizations adopt Universal Print, organizations and independent software vendors (ISVs) can use the Universal Print API in Microsoft Graph to build and extend applications to support new scenarios.</span></span>

### <a name="print-documents-from-web-and-mobile-applications"></a><span data-ttu-id="fa0ab-110">Imprimir documentos de aplicativos da Web e móveis</span><span class="sxs-lookup"><span data-stu-id="fa0ab-110">Print documents from web and mobile applications</span></span>

<span data-ttu-id="fa0ab-111">Mover a infraestrutura de impressão para a nuvem permite imprimir documentos diretamente de aplicativos da Web e móveis.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-111">Moving print infrastructure to the cloud enables printing documents directly from web and mobile applications.</span></span>
- <span data-ttu-id="fa0ab-112">Os usuários podem enviar trabalhos de impressão para o printerShare.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-112">Users can submit print jobs to printerShare.</span></span>
- <span data-ttu-id="fa0ab-113">Os administradores da impressora também podem enviar trabalhos de impressão, para fazer testes preliminares antes de compartilhar a impressora com a organização.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-113">Printer admins can also submit print jobs to a printer, for doing preliminary testing before sharing the printer with the organization.</span></span>

<span data-ttu-id="fa0ab-114">Siga estas etapas para enviar trabalhos de impressão para o printerShare:</span><span class="sxs-lookup"><span data-stu-id="fa0ab-114">Follow these steps to submit print jobs to printerShare:</span></span>

1. <span data-ttu-id="fa0ab-115">[Crie um trabalho de impressão](/graph/api/printershare-post-jobs?view=graph-rest-beta) e armazene a ID do documento resultante.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-115">[Create a print job](/graph/api/printershare-post-jobs?view=graph-rest-beta) and store the resulting document ID.</span></span>
2. <span data-ttu-id="fa0ab-116">[Crie uma uploadSession](/graph/api/printdocument-createuploadsession?view=graph-rest-beta) para o documento.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-116">[Create an uploadSession](/graph/api/printdocument-createuploadsession?view=graph-rest-beta) for the document.</span></span> 
3. <span data-ttu-id="fa0ab-117">[Bytes de upload para a sessão de upload criada](./upload-data-to-upload-session.md).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-117">[Upload bytes to the created upload session](./upload-data-to-upload-session.md).</span></span>
4. <span data-ttu-id="fa0ab-118">[Iniciar o trabalho de impressão](/graph/api/printjob-start?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-118">[Start the print job](/graph/api/printjob-start?view=graph-rest-beta).</span></span>

### <a name="manage-printers"></a><span data-ttu-id="fa0ab-119">Gerenciar impressoras</span><span class="sxs-lookup"><span data-stu-id="fa0ab-119">Manage printers</span></span>

<span data-ttu-id="fa0ab-120">É uma tarefa complexa acompanhar as impressoras de uma organização, suas configurações e uso.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-120">Keeping track of an organization's printers, printer configurations, and printer usage is a complex task.</span></span> <span data-ttu-id="fa0ab-121">A API de Impressão Universal permite a integração em todas as três áreas.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-121">The Universal Print API enables integration in all three areas.</span></span>

* <span data-ttu-id="fa0ab-122">**Fique de olho no estado, configurações e disponibilidade da impressora**, usando a [Lista de impressoras](/graph/api/print-list-printers?view=graph-rest-beta) e o [printerStatus](/graph/api/resources/printerstatus?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-122">**Keep an eye on printer status, configurations, and availability** by using [List printers](/graph/api/print-list-printers?view=graph-rest-beta) and [printerStatus](/graph/api/resources/printerstatus?view=graph-rest-beta).</span></span>

* <span data-ttu-id="fa0ab-123">**Veja quem está usando as impressoras e o quanto elas estão imprimindo** usando as APIs de relatórios:</span><span class="sxs-lookup"><span data-stu-id="fa0ab-123">**See who's using your printers and how much they're printing** by using the reporting APIs:</span></span>
  * [<span data-ttu-id="fa0ab-124">Listar dailyPrintUsageSummariesByUser</span><span class="sxs-lookup"><span data-stu-id="fa0ab-124">List dailyPrintUsageSummariesByUser</span></span>](/graph/api/reportroot-list-dailyprintusagesummariesbyuser?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-125">Listar monthlyPrintUsageSummariesByUser</span><span class="sxs-lookup"><span data-stu-id="fa0ab-125">List monthlyPrintUsageSummariesByUser</span></span>](/graph/api/reportroot-list-monthlyprintusagesummariesbyuser?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-126">Listar dailyPrintUsageSummariesByPrinter</span><span class="sxs-lookup"><span data-stu-id="fa0ab-126">List dailyPrintUsageSummariesByPrinter</span></span>](/graph/api/reportroot-list-dailyprintusagesummariesbyprinter?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-127">Listar monthlyPrintUsageSummariesByPrinter</span><span class="sxs-lookup"><span data-stu-id="fa0ab-127">List monthlyPrintUsageSummariesByPrinter</span></span>](/graph/api/reportroot-list-monthlyprintusagesummariesbyprinter?view=graph-rest-beta)

* <span data-ttu-id="fa0ab-128">**Configurar permissões de usuário** modificando a associação de usuários e grupos das impressoras:</span><span class="sxs-lookup"><span data-stu-id="fa0ab-128">**Configure user permissions** by modifying user and group membership on printers:</span></span>
  * [<span data-ttu-id="fa0ab-129">Listar allowedUsers</span><span class="sxs-lookup"><span data-stu-id="fa0ab-129">List allowedUsers</span></span>](/graph/api/printershare-list-allowedusers?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-130">Adicionar allowedUser</span><span class="sxs-lookup"><span data-stu-id="fa0ab-130">Add allowedUser</span></span>](/graph/api/printershare-post-allowedusers?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-131">Remover allowedUser</span><span class="sxs-lookup"><span data-stu-id="fa0ab-131">Remove allowedUser</span></span>](/graph/api/printershare-delete-alloweduser?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-132">Listar allowedGroups</span><span class="sxs-lookup"><span data-stu-id="fa0ab-132">List allowedGroups</span></span>](/graph/api/printershare-list-allowedgroups?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-133">Adicionar allowedGroup</span><span class="sxs-lookup"><span data-stu-id="fa0ab-133">Add allowedGroup</span></span>](/graph/api/printershare-post-allowedgroups?view=graph-rest-beta)
  * [<span data-ttu-id="fa0ab-134">Remover allowedGroup</span><span class="sxs-lookup"><span data-stu-id="fa0ab-134">Remove allowedGroup</span></span>](/graph/api/printershare-delete-allowedgroup?view=graph-rest-beta)

### <a name="seamlessly-replace-or-update-printer-hardware"></a><span data-ttu-id="fa0ab-135">Substituir ou atualizar o hardware da impressora sem problemas</span><span class="sxs-lookup"><span data-stu-id="fa0ab-135">Seamlessly replace or update printer hardware</span></span>

<span data-ttu-id="fa0ab-136">As impressoras não estarão visíveis para os usuários até que sejam [compartilhadas](/graph/api/print-post-shares?view=graph-rest-beta), proporcionando aos administradores um controle detalhado sobre qual hardware de impressora estará disponível em um determinado momento.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-136">Printers are not visible to users until they are [shared](/graph/api/print-post-shares?view=graph-rest-beta), providing administrators fine-grained control over which printer hardware is available at a given time.</span></span>

<span data-ttu-id="fa0ab-137">O compartilhamento de uma impressora cria um recurso [printerShare](/graph/api/resources/printershare?view=graph-rest-beta) que pode ser atualizado a qualquer momento para indicar uma impressora diferente, facilitando a substituição de hardware de uma impressora quebrada ou a desativação de impressoras para manutenção.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-137">Sharing a printer creates a [printerShare](/graph/api/resources/printershare?view=graph-rest-beta) resource that can be updated at any time to point to a different printer, making it easy to replace broken printer hardware or take printers offline for maintenance.</span></span>

<span data-ttu-id="fa0ab-138">Para usá-lo em seu aplicativo, use [Update printerShare](/graph/api/printershare-update?view=graph-rest-beta) para atualizar a referência `printer` de printerShare.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-138">To use this in your application, use [Update printerShare](/graph/api/printershare-update?view=graph-rest-beta) to update the printerShare's `printer` reference.</span></span>

### <a name="extending-universal-print-to-support-pull-printing"></a><span data-ttu-id="fa0ab-139">Extensão da Impressão Universal para suporte à impressão segura</span><span class="sxs-lookup"><span data-stu-id="fa0ab-139">Extending Universal Print to support pull printing</span></span>

<span data-ttu-id="fa0ab-140">A API de Impressão Universal do Microsoft Graph permite que o seu aplicativo suporte a impressão segura.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-140">The Microsoft Graph Universal Print API enables your application to support pull printing.</span></span> <span data-ttu-id="fa0ab-141">Para configurar a impressão segura, você registrará acionadores que notificarão o seu aplicativo (via comunicação serviço a serviço) quando determinados eventos de impressão acontecem, como um trabalho de impressão sendo iniciado.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-141">To set up pull printing, you will register triggers that notify your application (via service-to-service communication) when certain print events happen, such as a print job being started.</span></span>

<span data-ttu-id="fa0ab-142">Esses acionadores permitem que o seu aplicativo interrompa o fluxo de trabalho de impressão para fazer coisas como redirecionar os trabalhos para diferentes impressoras e modificar o conteúdo do documento.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-142">These triggers enable your application to interrupt the print workflow to do things such as redirecting jobs to different printers and modifying the document payload.</span></span>

<span data-ttu-id="fa0ab-143">Siga estes passos para habilitar a impressão segura:</span><span class="sxs-lookup"><span data-stu-id="fa0ab-143">Follow these steps to enable pull printing:</span></span>

1. <span data-ttu-id="fa0ab-144">[Crie uma Definição de Tarefa de impressão](/graph/api/print-post-taskdefinitions?view=graph-rest-beta) usando as permissões do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-144">[Create a printTaskDefinition](/graph/api/print-post-taskdefinitions?view=graph-rest-beta) using application permissions.</span></span> <span data-ttu-id="fa0ab-145">Esta definição de tarefa abstrata será usada para criar a tarefa que irá realizar o trabalho para o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-145">This abstract task definition will be used to create task that will hold the job for your application.</span></span> <span data-ttu-id="fa0ab-146">É necessário estabelecer pelo menos uma definição de tarefa por inquilino, que pode ser associada a qualquer número de impressoras, usando acionadores de tarefa (ver etapa 4).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-146">You need to define at least one task definition per tenant, which can be associated with any number of printers in the tenant using task triggers (see step 4).</span></span>

2. <span data-ttu-id="fa0ab-147">[Registre uma ou mais impressoras virtuais](/graph/api/printer-create?view=graph-rest-beta) usando um token de autenticação de administrador e um `null` **Dispositivo físico**.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-147">[Register one or more virtual printers](/graph/api/printer-create?view=graph-rest-beta) using an administrator authentication token and a `null` **physicalDeviceId**.</span></span> <span data-ttu-id="fa0ab-148">Sem um dispositivo físico acoplado, uma "impressora virtual" é apenas um objeto de impressora na Impressão Universal.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-148">A "virtual printer" is just a printer object in Universal Print without a physical device attached.</span></span> <span data-ttu-id="fa0ab-149">Normalmente, os usuários imprimem em impressoras virtuais e depois pegam seus trabalhos de impressão em um dispositivo físico de impressão.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-149">Usually, users will print to virtual printers and later pick up their print jobs at a physical print device.</span></span> <span data-ttu-id="fa0ab-150">Veja o passo 6.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-150">See step 6.</span></span>

3. <span data-ttu-id="fa0ab-151">[Atualize os atributos de sua impressora virtual](/graph/api/printer-update?view=graph-rest-beta) usando as permissões do aplicativo e um `application/ipp` tipo de mídia (veja exemplos).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-151">[Update the attributes of your virtual printer](/graph/api/printer-update?view=graph-rest-beta) by using application permissions and an `application/ipp` media type (see examples).</span></span>

4. <span data-ttu-id="fa0ab-152">[Crie um acionador de tarefas para sua impressora virtual](/graph/api/printer-post-tasktriggers?view=graph-rest-beta) usando um token de autenticação de administrador que irá associar a definição da sua tarefa com a impressora virtual.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-152">[Create a task trigger for your virtual printer](/graph/api/printer-post-tasktriggers?view=graph-rest-beta) using an administrator authentication token that will associate your task definition with virtual printer.</span></span>

5. <span data-ttu-id="fa0ab-153">Quando um trabalho de impressão é enviado para a impressora virtual, ele será pausado devido ao [ Acionador de Tarefas de impressão](/graph/api/resources/printtasktrigger?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-153">When a print job is submitted to the virtual printer, it will be paused due to the [printTaskTrigger](/graph/api/resources/printtasktrigger?view=graph-rest-beta).</span></span> <span data-ttu-id="fa0ab-154">Uma [Tarefa de impressão](/graph/api/resources/printtask?view=graph-rest-beta) com `processing`estado será criada com base na [Definição da Tarefa de impressão associada](/graph/api/resources/printtaskdefinition?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-154">A [printTask](/graph/api/resources/printtask?view=graph-rest-beta) with `processing` state will be created based on the associated [printTaskDefinition](/graph/api/resources/printtaskdefinition?view=graph-rest-beta).</span></span>

6. <span data-ttu-id="fa0ab-155">Quando o usuário passar um crachá em um dispositivo físico de impressão, a impressora notificará o seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-155">When the user swipes a badge at a physical printer device, the printer will notify your application.</span></span> <span data-ttu-id="fa0ab-156">Nessa altura, o seu aplicativo pode [buscar os trabalhos da impressora virtual associada](/graph/api/printer-list-jobs?view=graph-rest-beta) e filtrar a lista de trabalhos criados pelo usuário atual.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-156">At that time, your application can [fetch the jobs of the associated virtual printer](/graph/api/printer-list-jobs?view=graph-rest-beta) and filter the list to jobs created by the current user.</span></span>

7. <span data-ttu-id="fa0ab-157">Quando o usuário seleciona um ou mais trabalhos para imprimir, seu aplicativo pode [redirecionar o(s) trabalho(s) de impressão](/graph/api/printjob-redirect?view=graph-rest-beta) para a impressora física e o trabalho começará a imprimir!</span><span class="sxs-lookup"><span data-stu-id="fa0ab-157">When the user selects one or more jobs to print, your application can [redirect the print job(s)](/graph/api/printjob-redirect?view=graph-rest-beta) to the physical printer and the job will start printing!</span></span> <span data-ttu-id="fa0ab-158">A chamada de redirecionamento só terá sucesso se houver uma [Tarefa de impressão](/graph/api/resources/printtask?view=graph-rest-beta) em `processing` estado na impressora associada iniciada por um acionador que este aplicativo criou no passo 4.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-158">The redirect call will only succeed if there is a [printTask](/graph/api/resources/printtask?view=graph-rest-beta) in `processing` state on the associated printer started by a trigger that this app created in step 4.</span></span> <span data-ttu-id="fa0ab-159">A tarefa será automaticamente definida para o `completed` estado após o redirecionamento.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-159">The task will automatically be set to `completed` state after redirecting it.</span></span>

## <a name="api-reference"></a><span data-ttu-id="fa0ab-160">Referência da API</span><span class="sxs-lookup"><span data-stu-id="fa0ab-160">API reference</span></span>
<span data-ttu-id="fa0ab-161">Está procurando a referência de API para esse serviço?</span><span class="sxs-lookup"><span data-stu-id="fa0ab-161">Looking for the API reference for this service?</span></span>

- [<span data-ttu-id="fa0ab-162">API de Impressão Universal no Microsoft Graph beta</span><span class="sxs-lookup"><span data-stu-id="fa0ab-162">Universal Print API in Microsoft Graph beta</span></span>](/graph/api/resources/print?view=graph-rest-beta)

## <a name="provide-feedback"></a><span data-ttu-id="fa0ab-163">Faça comentários</span><span class="sxs-lookup"><span data-stu-id="fa0ab-163">Provide feedback</span></span>

<span data-ttu-id="fa0ab-164">Gostaríamos de ouvir seus comentários sobre as APIs de Impressão Universal.</span><span class="sxs-lookup"><span data-stu-id="fa0ab-164">We'd love to hear your feedback about the Universal Print APIs.</span></span> <span data-ttu-id="fa0ab-165">Forneça suas sugestões sobre o[UserVoice](https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests).</span><span class="sxs-lookup"><span data-stu-id="fa0ab-165">Provide your suggestions on [UserVoice](https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests).</span></span>

## <a name="see-also"></a><span data-ttu-id="fa0ab-166">Confira também</span><span class="sxs-lookup"><span data-stu-id="fa0ab-166">See also</span></span>

- [<span data-ttu-id="fa0ab-167">O que é a impressão universal?</span><span class="sxs-lookup"><span data-stu-id="fa0ab-167">What is Universal Print</span></span>](/universal-print/fundamentals/universal-print-whatis)