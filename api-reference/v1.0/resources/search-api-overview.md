---
title: Usar a API de Pesquisa da Microsoft para consultar dados
description: Utilizando a API de pesquisa, os aplicativos podem pesquisar os dados do Microsoft 365 no contexto do usuário autenticado
localization_priority: Priority
author: nmoreau
ms.prod: search
doc_type: resourcePageType
ms.openlocfilehash: b616119d1b5c1dcc8bb56b65711468cceafd7d88
ms.sourcegitcommit: 9f88b7e41a4a4a4d5f52bd995ce07c6f702bd5d6
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/01/2020
ms.locfileid: "49523004"
---
# <a name="use-the-microsoft-search-api-to-query-data"></a><span data-ttu-id="273ed-103">Usar a API de Pesquisa da Microsoft para consultar dados</span><span class="sxs-lookup"><span data-stu-id="273ed-103">Use the Microsoft Search API to query data</span></span>

<span data-ttu-id="273ed-104">Você pode utilizar a API de Pesquisa da Microsoft para consultar os dados do Microsoft 365 nos seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="273ed-104">You can use the Microsoft Search API to query Microsoft 365 data in your apps.</span></span>

<span data-ttu-id="273ed-105">As solicitações de pesquisa são executadas no contexto do usuário conectado, identificado usando um [token de acesso com permissões delegadas](/graph/auth-v2-user).</span><span class="sxs-lookup"><span data-stu-id="273ed-105">Search requests run in the context of the signed-in user, identified using an [access token with delegated permissions](/graph/auth-v2-user).</span></span>

## <a name="common-use-cases"></a><span data-ttu-id="273ed-106">Casos de uso comuns</span><span class="sxs-lookup"><span data-stu-id="273ed-106">Common use cases</span></span>

<span data-ttu-id="273ed-107">A API de pesquisa da Microsoft fornece um método de [consulta](../api/search-query.md) para pesquisar os dados na Pesquisa da Microsoft, no qual você passa um[searchRequest](searchRequest.md) no corpo da solicitação, definindo as especificações da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="273ed-107">The Microsoft Search API provides a [query](../api/search-query.md) method to search across your data in Microsoft Search, where you pass a [searchRequest](searchRequest.md) in the request body, defining the specifics of your search.</span></span>

<span data-ttu-id="273ed-108">Essa seção lista os casos de uso comuns do método de **consulta**, com base nas propriedades e parâmetros definidos no corpo da **consulta** [searchRequest](searchRequest.md).</span><span class="sxs-lookup"><span data-stu-id="273ed-108">This section lists the common use cases of the **query** method, based on the properties and parameters you set in the **query** [searchRequest](searchRequest.md) body.</span></span>

<span data-ttu-id="273ed-109">As solicitações de pesquisa são executadas em nome do usuário.</span><span class="sxs-lookup"><span data-stu-id="273ed-109">Search requests run on behalf of the user.</span></span> <span data-ttu-id="273ed-110">Os resultados da pesquisa têm escopo para impor o controle de acesso aplicado aos itens.</span><span class="sxs-lookup"><span data-stu-id="273ed-110">Search results are scoped to enforce any access control applied to the items.</span></span>  <span data-ttu-id="273ed-111">Por exemplo, no contexto de arquivos, as permissões em relação aos arquivos serão avaliadas como parte da solicitação de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="273ed-111">For example, in the context of files, permissions on the files are evaluated as part of the search request.</span></span> <span data-ttu-id="273ed-112">Os usuários não podem acessar mais itens em uma pesquisa do que eles poderiam obter de uma operação GET correspondente com as mesmas permissões e controle de acesso.</span><span class="sxs-lookup"><span data-stu-id="273ed-112">Users cannot access more items in a search than they can otherwise obtain from a corresponding GET operation with the same permissions and access control.</span></span>

| <span data-ttu-id="273ed-113">Casos de uso</span><span class="sxs-lookup"><span data-stu-id="273ed-113">Use cases</span></span> | <span data-ttu-id="273ed-114">Propriedades a serem definidas no corpo da solicitação de consulta</span><span class="sxs-lookup"><span data-stu-id="273ed-114">Properties to define in the query request body</span></span> |
|:------------------|:---------|
|[<span data-ttu-id="273ed-115"> Resultados da pesquisa de escopo com base em tipos de entidade</span><span class="sxs-lookup"><span data-stu-id="273ed-115">Scope search results based on entity types</span></span>](#scope-search-based-on-entity-types)| <span data-ttu-id="273ed-116">**entityTypes**</span><span class="sxs-lookup"><span data-stu-id="273ed-116">**entityTypes**</span></span> |
|[<span data-ttu-id="273ed-117">Resultados da página</span><span class="sxs-lookup"><span data-stu-id="273ed-117">Page results</span></span>](#page-search-results) | <span data-ttu-id="273ed-118">**from** e **size**</span><span class="sxs-lookup"><span data-stu-id="273ed-118">**from** and **size**</span></span> |
|[<span data-ttu-id="273ed-119">Obter os emails mais relevantes</span><span class="sxs-lookup"><span data-stu-id="273ed-119">Get the most relevant emails</span></span>](#get-the-most-relevant-emails) | <span data-ttu-id="273ed-120">**enableTopResults**</span><span class="sxs-lookup"><span data-stu-id="273ed-120">**enableTopResults**</span></span> |
|[<span data-ttu-id="273ed-121">Obter as propriedades selecionadas</span><span class="sxs-lookup"><span data-stu-id="273ed-121">Get selected properties</span></span>](#get-selected-properties) | <span data-ttu-id="273ed-122">**campos**</span><span class="sxs-lookup"><span data-stu-id="273ed-122">**fields**</span></span> |
|[<span data-ttu-id="273ed-123">Usar KQL em termos de consulta</span><span class="sxs-lookup"><span data-stu-id="273ed-123">Use KQL in query terms</span></span>](#keyword-query-language-kql-support) | <span data-ttu-id="273ed-124">**query**</span><span class="sxs-lookup"><span data-stu-id="273ed-124">**query**</span></span> |

## <a name="scope-search-based-on-entity-types"></a><span data-ttu-id="273ed-125">Pesquisa de escopo com base em tipos de entidade</span><span class="sxs-lookup"><span data-stu-id="273ed-125">Scope search based on entity types</span></span>

<span data-ttu-id="273ed-126">Defina o escopo da solicitação de pesquisa usando a propriedade **entityTypes** no conteúdo da solicitação **query**.</span><span class="sxs-lookup"><span data-stu-id="273ed-126">Define the scope of the search request using the **entityTypes** property in the **query** request payload.</span></span>
<span data-ttu-id="273ed-127">A tabela a seguir descreve os tipos disponíveis para consulta e as permissões com suporte para acessar os dados.</span><span class="sxs-lookup"><span data-stu-id="273ed-127">The following table describes the types available to query and the supported permissions to access the data.</span></span>

| <span data-ttu-id="273ed-128">EntityType</span><span class="sxs-lookup"><span data-stu-id="273ed-128">EntityType</span></span> | <span data-ttu-id="273ed-129">Escopo de permissão necessário para acessar os itens</span><span class="sxs-lookup"><span data-stu-id="273ed-129">Permission scope required to access the items</span></span>| <span data-ttu-id="273ed-130">Origem</span><span class="sxs-lookup"><span data-stu-id="273ed-130">Source</span></span>| <span data-ttu-id="273ed-131">Comentário</span><span class="sxs-lookup"><span data-stu-id="273ed-131">Comment</span></span>|
|:------------------|:---------|:---------|:---------|
|[<span data-ttu-id="273ed-132">message</span><span class="sxs-lookup"><span data-stu-id="273ed-132">message</span></span>](message.md)|<span data-ttu-id="273ed-133">Mail.Read, Mail.ReadWrite</span><span class="sxs-lookup"><span data-stu-id="273ed-133">Mail.Read, Mail.ReadWrite</span></span>| <span data-ttu-id="273ed-134">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="273ed-134">Exchange Online</span></span>| <span data-ttu-id="273ed-135">Mensagens de email.</span><span class="sxs-lookup"><span data-stu-id="273ed-135">Email messages.</span></span>|
|[<span data-ttu-id="273ed-136">event</span><span class="sxs-lookup"><span data-stu-id="273ed-136">event</span></span>](event.md) |<span data-ttu-id="273ed-137">Calendars.Read, Calendars.ReadWrite</span><span class="sxs-lookup"><span data-stu-id="273ed-137">Calendars.Read, Calendars.ReadWrite</span></span>| <span data-ttu-id="273ed-138">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="273ed-138">Exchange Online</span></span>|<span data-ttu-id="273ed-139">Eventos do calendário.</span><span class="sxs-lookup"><span data-stu-id="273ed-139">Calendar events.</span></span> |
|[<span data-ttu-id="273ed-140">unidade</span><span class="sxs-lookup"><span data-stu-id="273ed-140">drive</span></span>](drive.md)|<span data-ttu-id="273ed-141">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="273ed-141">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="273ed-142">SharePoint</span><span class="sxs-lookup"><span data-stu-id="273ed-142">SharePoint</span></span> | <span data-ttu-id="273ed-143">Bibliotecas de documentos.</span><span class="sxs-lookup"><span data-stu-id="273ed-143">Document libraries.</span></span>|
|[<span data-ttu-id="273ed-144">driveItem</span><span class="sxs-lookup"><span data-stu-id="273ed-144">driveItem</span></span>](driveitem.md)|<span data-ttu-id="273ed-145">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="273ed-145">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="273ed-146">SharePoint e OneDrive</span><span class="sxs-lookup"><span data-stu-id="273ed-146">SharePoint and OneDrive</span></span> | <span data-ttu-id="273ed-147">Arquivos, pastas, páginas e notícias.</span><span class="sxs-lookup"><span data-stu-id="273ed-147">Files, folders, pages, and news.</span></span> |
|[<span data-ttu-id="273ed-148">list</span><span class="sxs-lookup"><span data-stu-id="273ed-148">list</span></span>](list.md)|<span data-ttu-id="273ed-149">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="273ed-149">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="273ed-150">SharePoint e OneDrive</span><span class="sxs-lookup"><span data-stu-id="273ed-150">SharePoint and OneDrive</span></span> | <span data-ttu-id="273ed-151">Listas.</span><span class="sxs-lookup"><span data-stu-id="273ed-151">Lists.</span></span> <span data-ttu-id="273ed-152">Observe que as bibliotecas de documentos também são retornadas como listas.</span><span class="sxs-lookup"><span data-stu-id="273ed-152">Note that document libraries are also returned as lists.</span></span> |
|[<span data-ttu-id="273ed-153">listItem</span><span class="sxs-lookup"><span data-stu-id="273ed-153">listItem</span></span>](listitem.md)|<span data-ttu-id="273ed-154">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="273ed-154">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="273ed-155">SharePoint e OneDrive</span><span class="sxs-lookup"><span data-stu-id="273ed-155">SharePoint and OneDrive</span></span> | <span data-ttu-id="273ed-156">Listar itens.</span><span class="sxs-lookup"><span data-stu-id="273ed-156">List items.</span></span> <span data-ttu-id="273ed-157">Observe que os arquivos e as pastas também são retornados como itens de lista; **listItem** é a superclasse de **driveItem**.</span><span class="sxs-lookup"><span data-stu-id="273ed-157">Note that files and folders are also returned as list items; **listItem** is the super class of **driveItem**.</span></span> |
|[<span data-ttu-id="273ed-158">site</span><span class="sxs-lookup"><span data-stu-id="273ed-158">site</span></span>](site.md)|<span data-ttu-id="273ed-159">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="273ed-159">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="273ed-160">SharePoint</span><span class="sxs-lookup"><span data-stu-id="273ed-160">SharePoint</span></span> | <span data-ttu-id="273ed-161">Sites no SharePoint.</span><span class="sxs-lookup"><span data-stu-id="273ed-161">Sites in SharePoint.</span></span>|

## <a name="page-search-results"></a><span data-ttu-id="273ed-162">Resultados da pesquisa de página</span><span class="sxs-lookup"><span data-stu-id="273ed-162">Page search results</span></span>

<span data-ttu-id="273ed-163">Para controlar a paginação dos resultados da pesquisa, especifique as duas seguintes propriedades no corpo da solicitação **query**:</span><span class="sxs-lookup"><span data-stu-id="273ed-163">Control pagination of the search results by specifying the following two properties in the **query** request body:</span></span>

- <span data-ttu-id="273ed-164">**from** – um número inteiro que indica o ponto de partida baseado em 0 para listar os resultados da pesquisa na página.</span><span class="sxs-lookup"><span data-stu-id="273ed-164">**from** - An integer that indicates the 0-based starting point to list search results on the page.</span></span> <span data-ttu-id="273ed-165">O valor padrão é 0.</span><span class="sxs-lookup"><span data-stu-id="273ed-165">The default value is 0.</span></span>

- <span data-ttu-id="273ed-166">**size** – um número inteiro que indica o número de resultados a serem retornados para uma página.</span><span class="sxs-lookup"><span data-stu-id="273ed-166">**size** - An integer that indicates the number of results to be returned for a page.</span></span> <span data-ttu-id="273ed-167">O valor padrão é 25.</span><span class="sxs-lookup"><span data-stu-id="273ed-167">The default value is 25.</span></span>

<span data-ttu-id="273ed-168">Observe os seguintes limites se você estiver pesquisando a entidade **event** ou **message**:</span><span class="sxs-lookup"><span data-stu-id="273ed-168">Note the following limits if you're searching the **event** or **message** entity:</span></span>

- <span data-ttu-id="273ed-169">**from** deve começar em zero na primeira solicitação de página; caso contrário, a solicitação resultará em um HTTP 400 `Bad request`.</span><span class="sxs-lookup"><span data-stu-id="273ed-169">**from** must start at zero in the first page request; otherwise, the request results in an HTTP 400 `Bad request`.</span></span>
- <span data-ttu-id="273ed-170">O máximo de resultados por página (**size**) é 25 por **mensagem** e **evento**.</span><span class="sxs-lookup"><span data-stu-id="273ed-170">The maximum results per page (**size**) is 25 for **message** and **event**.</span></span> 

<span data-ttu-id="273ed-171">Não há um limite superior para itens do SharePoint ou do OneDrive.</span><span class="sxs-lookup"><span data-stu-id="273ed-171">There is no upper limit for SharePoint or OneDrive items.</span></span> <span data-ttu-id="273ed-172">Um tamanho de página razoável é 200.</span><span class="sxs-lookup"><span data-stu-id="273ed-172">A reasonable page size is 200.</span></span> <span data-ttu-id="273ed-173">Um tamanho de página maior geralmente gera uma latência maior.</span><span class="sxs-lookup"><span data-stu-id="273ed-173">A larger page size generally incurs higher latency.</span></span>

<span data-ttu-id="273ed-174">Práticas recomendadas:</span><span class="sxs-lookup"><span data-stu-id="273ed-174">Best practices:</span></span>

- <span data-ttu-id="273ed-175">Especifique uma primeira página menor na solicitação inicial.</span><span class="sxs-lookup"><span data-stu-id="273ed-175">Specify a smaller first page in the initial request.</span></span> <span data-ttu-id="273ed-176">Por exemplo, especifique **from** como 0 e **size** como 25.</span><span class="sxs-lookup"><span data-stu-id="273ed-176">For example, specify **from** as 0, **size** as 25.</span></span>
- <span data-ttu-id="273ed-177">Pagine as páginas subsequentes atualizando as propriedades **from** e **size**.</span><span class="sxs-lookup"><span data-stu-id="273ed-177">Paginate subsequent pages by updating the **from** and **size** properties.</span></span> <span data-ttu-id="273ed-178">Você pode aumentar o tamanho de página em cada solicitação subsequente.</span><span class="sxs-lookup"><span data-stu-id="273ed-178">You can increase the page size in each subsequent request.</span></span> <span data-ttu-id="273ed-179">A tabela a seguir mostra um exemplo.</span><span class="sxs-lookup"><span data-stu-id="273ed-179">The following table shows an example.</span></span>

    | <span data-ttu-id="273ed-180">Página</span><span class="sxs-lookup"><span data-stu-id="273ed-180">Page</span></span> | <span data-ttu-id="273ed-181">from</span><span class="sxs-lookup"><span data-stu-id="273ed-181">from</span></span> | <span data-ttu-id="273ed-182">size</span><span class="sxs-lookup"><span data-stu-id="273ed-182">size</span></span> |
    |:-----|:-----|:-----|
    | <span data-ttu-id="273ed-183">1</span><span class="sxs-lookup"><span data-stu-id="273ed-183">1</span></span>    | <span data-ttu-id="273ed-184">0</span><span class="sxs-lookup"><span data-stu-id="273ed-184">0</span></span> | <span data-ttu-id="273ed-185">25</span><span class="sxs-lookup"><span data-stu-id="273ed-185">25</span></span> |
    | <span data-ttu-id="273ed-186">2</span><span class="sxs-lookup"><span data-stu-id="273ed-186">2</span></span>    | <span data-ttu-id="273ed-187">25</span><span class="sxs-lookup"><span data-stu-id="273ed-187">25</span></span> | <span data-ttu-id="273ed-188">50</span><span class="sxs-lookup"><span data-stu-id="273ed-188">50</span></span> |
    | <span data-ttu-id="273ed-189">3</span><span class="sxs-lookup"><span data-stu-id="273ed-189">3</span></span>    | <span data-ttu-id="273ed-190">75</span><span class="sxs-lookup"><span data-stu-id="273ed-190">75</span></span> | <span data-ttu-id="273ed-191">75</span><span class="sxs-lookup"><span data-stu-id="273ed-191">75</span></span> |
    | <span data-ttu-id="273ed-192">4</span><span class="sxs-lookup"><span data-stu-id="273ed-192">4</span></span>    | <span data-ttu-id="273ed-193">150</span><span class="sxs-lookup"><span data-stu-id="273ed-193">150</span></span> | <span data-ttu-id="273ed-194">100</span><span class="sxs-lookup"><span data-stu-id="273ed-194">100</span></span> |

## <a name="get-the-most-relevant-emails"></a><span data-ttu-id="273ed-195">Obter os emails mais relevantes</span><span class="sxs-lookup"><span data-stu-id="273ed-195">Get the most relevant emails</span></span>

<span data-ttu-id="273ed-196">Quando você pesquisa na entidade **mensagem**, a especificação de **enableTopResults** como`true` retorna uma lista híbrida de mensagens: as três primeiras mensagens na resposta são classificadas por relevância; as mensagens restantes são classificadas por data/hora.</span><span class="sxs-lookup"><span data-stu-id="273ed-196">When searching the **message** entity, specifying **enableTopResults** as `true` returns a hybrid list of messages: the first three messages in the response are sorted by relevance; the remaining messages are sorted by date/time.</span></span>

## <a name="get-selected-properties"></a><span data-ttu-id="273ed-197">Obter as propriedades selecionadas</span><span class="sxs-lookup"><span data-stu-id="273ed-197">Get selected properties</span></span>

<span data-ttu-id="273ed-198">Ao pesquisar um tipo de entidade, como **mensagem**, **evento**, **unidade**, **driveItem**, **lista**, **listItem**, **site**, **externalItem**, você pode incluir na propriedade **campos** as propriedades de entidade específica para retornar nos resultados da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="273ed-198">When searching an entity type, such as **message**, **event**, **drive**, **driveItem**, **list**, **listItem**, **site**, **externalItem**, you can include in the **fields** property specific entity properties to return in the search results.</span></span> <span data-ttu-id="273ed-199">Isso é semelhante a usar a opção [$select, da consulta do sistema OData](/graph/query-parameters#select-parameter), em solicitações REST.</span><span class="sxs-lookup"><span data-stu-id="273ed-199">This is similar to using the [OData system query option, $select](/graph/query-parameters#select-parameter) in REST requests.</span></span> <span data-ttu-id="273ed-200">A pesquisa do API não oferece suporte técnico a essas opções de consulta porque o comportamento é expresso no corpo POST.</span><span class="sxs-lookup"><span data-stu-id="273ed-200">The search API does not technically support these query options because the behavior is expressed in the POST body.</span></span>

<span data-ttu-id="273ed-201">Para todos esses tipos de entidade, especificar a propriedade **campos** reduz o número de propriedades retornadas na resposta, melhorando a carga na conexão.</span><span class="sxs-lookup"><span data-stu-id="273ed-201">For all these entity types, specifying the **fields** property reduces the number of properties returned in the response, optimizing the payload over the wire.</span></span>

<span data-ttu-id="273ed-202">As entidades **listItem** e **externalItem** são as únicas entidades com suporte que permitem a colocação de campos estendidos configurados no esquema.</span><span class="sxs-lookup"><span data-stu-id="273ed-202">The **listItem** and **externalItem** entities are the only supported entities that allow getting extended fields configured in the schema.</span></span> <span data-ttu-id="273ed-203">Não é possível recuperar propriedades estendidas de todas as outras entidades.</span><span class="sxs-lookup"><span data-stu-id="273ed-203">You cannot retrieve extended properties from all the other entities.</span></span> <span data-ttu-id="273ed-204">Por exemplo, se você criou um campo para **externalItem** no esquema de pesquisa ou se tiver uma coluna personalizada em uma **listItem**, você pode recuperar essas propriedades da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="273ed-204">For example, if you created a field for **externalItem** in the search schema, or if you have a custom column on a **listItem**, you can retrieve these properties from search.</span></span> <span data-ttu-id="273ed-205">Para recuperar uma propriedade estendida de um arquivo, especifique o tipo **listItem** na solicitação.</span><span class="sxs-lookup"><span data-stu-id="273ed-205">To retrieve an extended property on a file, specify the **listItem** type in the request.</span></span>

<span data-ttu-id="273ed-206">Se os **campos** especificados na solicitação não estiverem presentes no esquema, eles não serão retornados na resposta.</span><span class="sxs-lookup"><span data-stu-id="273ed-206">If the **fields** specified in the request are not present in the schema, they will not be returned in the response.</span></span> <span data-ttu-id="273ed-207">Campos inválidos na solicitação são ignorados silenciosamente.</span><span class="sxs-lookup"><span data-stu-id="273ed-207">Invalid fields in the request are silently ignored.</span></span>

<span data-ttu-id="273ed-208">Se você não especificar nenhum **campo** na solicitação, obterá o conjunto padrão de propriedades para todos os tipos.</span><span class="sxs-lookup"><span data-stu-id="273ed-208">If you do not specify any **fields** in the request,  you will get the default set of properties for all types.</span></span> <span data-ttu-id="273ed-209">Para propriedades estendidas, **listItem** e **externalItem** se comportam de forma diferente quando nenhum **campo** é passado na solicitação:</span><span class="sxs-lookup"><span data-stu-id="273ed-209">For extended properties, **listItem** and **externalItem** behave differently when no **fields** are passed in the request:</span></span>

- <span data-ttu-id="273ed-210">**listItem** não retornará nenhum campo personalizado.</span><span class="sxs-lookup"><span data-stu-id="273ed-210">**listItem** will not return any custom field.</span></span>
- <span data-ttu-id="273ed-211">**externalItem** retornará todos os campos marcados com o atributo **recuperável** no esquema do conector do Microsoft Graph para essa conexão em particular.</span><span class="sxs-lookup"><span data-stu-id="273ed-211">**externalItem** will return all the fields marked with the **retrievable** attribute in the Microsoft Graph connector schema for that particular connection.</span></span>

## <a name="keyword-query-language-kql-support"></a><span data-ttu-id="273ed-212">Suporte a KQL (Linguagem de Consulta de Palavra-chave)</span><span class="sxs-lookup"><span data-stu-id="273ed-212">Keyword Query Language (KQL) support</span></span>

<span data-ttu-id="273ed-213">Especifique palavras-chave de texto livre, operadores (como `AND`, `OR`) e restrições de propriedade na sintaxe KQL na cadeia de caracteres de consulta de pesquisa real (propriedade **query** do corpo da solicitação **query**).</span><span class="sxs-lookup"><span data-stu-id="273ed-213">Specify free text keywords, operators (such as `AND`, `OR`), and property restrictions in KQL syntax in the actual search query string (**query** property of the **query** request body).</span></span> <span data-ttu-id="273ed-214">A sintaxe e o comando dependem dos tipos de entidade (na propriedade **entityTypes**) que você direciona no corpo da solicitação **query**.</span><span class="sxs-lookup"><span data-stu-id="273ed-214">The syntax and command depend on the entity types (in the **entityTypes** property) you target in the same **query** request body.</span></span>

<span data-ttu-id="273ed-215">Dependendo do tipo de entidade, as propriedades pesquisáveis variam.</span><span class="sxs-lookup"><span data-stu-id="273ed-215">Depending on the entity type, the searchable properties vary.</span></span> <span data-ttu-id="273ed-216">Veja mais detalhes em:</span><span class="sxs-lookup"><span data-stu-id="273ed-216">For details, see:</span></span>

- [<span data-ttu-id="273ed-217">Propriedades do email</span><span class="sxs-lookup"><span data-stu-id="273ed-217">Email properties</span></span>](/microsoft-365/compliance/keyword-queries-and-search-conditions#searchable-email-properties)
- [<span data-ttu-id="273ed-218">Propriedades do site</span><span class="sxs-lookup"><span data-stu-id="273ed-218">Site properties</span></span>](/microsoft-365/compliance/keyword-queries-and-search-conditions#searchable-site-properties)

## <a name="error-handling"></a><span data-ttu-id="273ed-219">Tratamento de erros</span><span class="sxs-lookup"><span data-stu-id="273ed-219">Error handling</span></span>

<span data-ttu-id="273ed-220">A API de pesquisa retorna respostas de erro conforme estipulado pela [definição de objeto de erro OData](http://docs.oasis-open.org/odata/odata-json-format/v4.01/cs01/odata-json-format-v4.01-cs01.html#sec_ErrorResponse). Cada uma delas é um objeto JSON que contém um código e uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="273ed-220">The search API returns error responses as defined by [OData error object definition](http://docs.oasis-open.org/odata/odata-json-format/v4.01/cs01/odata-json-format-v4.01-cs01.html#sec_ErrorResponse), each of which is a JSON object containing a code and a message.</span></span>

<!---TODOSEARCHAPI Describe the know errors: bad requests.--->

## <a name="known-limitations"></a><span data-ttu-id="273ed-221">Limitações conhecidas</span><span class="sxs-lookup"><span data-stu-id="273ed-221">Known limitations</span></span>

<span data-ttu-id="273ed-222">A API de pesquisa tem as seguintes limitações:</span><span class="sxs-lookup"><span data-stu-id="273ed-222">The search API has the following limitations:</span></span>

- <span data-ttu-id="273ed-223">O método **query** é definido para permitir a passagem de um conjunto de uma ou mais instâncias de **searchRequest** de uma só vez.</span><span class="sxs-lookup"><span data-stu-id="273ed-223">The **query** method is defined to allow passing a collection of one or more **searchRequest** instances at once.</span></span> <span data-ttu-id="273ed-224">No entanto, atualmente o serviço dá suporte apenas a um único [searchRequest](./searchrequest.md) por vez.</span><span class="sxs-lookup"><span data-stu-id="273ed-224">However, the service currently supports only a single [searchRequest](./searchrequest.md) at a time.</span></span>

- <span data-ttu-id="273ed-225">O recurso [searchRequest](./searchrequest.md) dá suporte à passagem de vários tipos de entidades por vez.</span><span class="sxs-lookup"><span data-stu-id="273ed-225">The [searchRequest](./searchrequest.md) resource supports passing multiple types of entities at a time.</span></span> <span data-ttu-id="273ed-226">No entanto, no momento, a única combinação com suporte é para os entityTypes do SharePoint e o OneDrive: **driveItem**, **drive**, **site**, **list**, **listItem**.</span><span class="sxs-lookup"><span data-stu-id="273ed-226">However, currently the only supported combination is for SharePoint and OneDrive entityTypes: **driveItem**, **drive**, **site**, **list**, **listItem**.</span></span>
<span data-ttu-id="273ed-227">As combinações envolvendo **mensagem**, **evento**, tipos do SharePoint e do OneDrive ou **externalItem** não têm suporte no momento.</span><span class="sxs-lookup"><span data-stu-id="273ed-227">Any combinations involving **message**, **event**, SharePoint and OneDrive types , or **externalItem** are currently not supported.</span></span>  

- <span data-ttu-id="273ed-228">A propriedade **contentSource**, que define a conexão a ser usada, só será aplicável quando **entityType** for especificada como `externalItem`.</span><span class="sxs-lookup"><span data-stu-id="273ed-228">The **contentSource** property, which defines the connection to use, is only applicable when **entityType** is specified as `externalItem`.</span></span>

- <span data-ttu-id="273ed-229">A API de pesquisa não dá suporte à classificação personalizada para **mensagem**, **evento** ou  **externalItem**.</span><span class="sxs-lookup"><span data-stu-id="273ed-229">The search API does not support custom sort for **message**, **event** or  **externalItem**.</span></span>

- <span data-ttu-id="273ed-230">A API de pesquisa não dá suporte a agregações para **mensagem**, **evento**, **site** ou **unidade**.</span><span class="sxs-lookup"><span data-stu-id="273ed-230">The search API does not support aggregations for **message**, **event**, **site** or **drive**.</span></span>

## <a name="search-samples"></a><span data-ttu-id="273ed-231">Amostra de pesquisa</span><span class="sxs-lookup"><span data-stu-id="273ed-231">Search samples</span></span>

- <span data-ttu-id="273ed-232">Saiba mais sobre alguns dos principais casos de uso:</span><span class="sxs-lookup"><span data-stu-id="273ed-232">Learn more about a few key use cases:</span></span>
  - [<span data-ttu-id="273ed-233">Pesquisar mensagens do Outlook</span><span class="sxs-lookup"><span data-stu-id="273ed-233">Search Outlook messages</span></span>](/graph/search-concept-messages)
  - [<span data-ttu-id="273ed-234">Pesquisar eventos do calendário</span><span class="sxs-lookup"><span data-stu-id="273ed-234">Search calendar events</span></span>](/graph/search-concept-events)
  - [<span data-ttu-id="273ed-235">Pesquisar conteúdo no OneDrive e Microsoft Office SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="273ed-235">Search content in SharePoint and OneDrive</span></span>](/graph/search-concept-files)

- <span data-ttu-id="273ed-236">Explore as APIs no [Explorador do Graph](https://developer.microsoft.com/graph/graph-explorer).</span><span class="sxs-lookup"><span data-stu-id="273ed-236">Explore the search APIs in  [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>


## <a name="whats-new"></a><span data-ttu-id="273ed-237">O que há de novo</span><span class="sxs-lookup"><span data-stu-id="273ed-237">What's new</span></span>

<span data-ttu-id="273ed-238">Saiba mais sobre os [novos recursos e atualizações mais recentes](/graph/whats-new-overview) para este conjunto de APIs.</span><span class="sxs-lookup"><span data-stu-id="273ed-238">Find out about the [latest new features and updates](/graph/whats-new-overview) for this API set.</span></span>
